listen_point: docs

work_dir: ~/projects

provider:
    bitbucket:
        owner: username
        repo: repository
        branches:
            - default

extensions:
    logs:
        module: logs
        path: /var/log/sloth-ci
        filename: docs_errors.log
        level: ERROR

actions:
    - rm -rf repository
    - hg clone https://bitbucket.org/username/repository
    - hg up {branch} --cwd repository
    - pip3 install -U sphinx
    - pip3 install -r repository/docs/requirements.txt
    - sphinx-build -aE repository/docs/ {output}/{branch}

params:
    output: /var/www/html
